/*
Basic expressions information:
	Operators "=", ">", "<", "!=", "&&", "||"
	Values must be either constant values (string, integer, boolean) or any data-name already introduced in the process.
	An expression will always evaluate to boolean (true/false).
	While process is running: when a block is filled up, the rules are used to know which block to continue to.

*/

{
	"startBlock":"bGeneral",
	
	"blocks":
	[
		{
		    "description":"Requests general data which is required for any work or document",
		    "name":"bGeneral",
		    "autodata":{"key":"work_reference", "table":"autodata_table"},
		    "data":
		    [
		        {"name":"work_reference", "type":"string"},
		        {"name":"work_family", "type":"string"},
		        {"name":"work_type", "type":"string", "values":["digital_reproduction", "event_person_expo_photo", "audio", "video", "original_text", "plastic_work", "photo_work", "building", "expo_installation", "edited_book"]},
		        {"name":"is_part_of_edited_work", "type":"boolean"},
		        {"name":"edited_work_reference", "type":"string"},
		        {"name":"contains_other_works", "type":"boolean"},
		        {"name":"contains_people_brand_info", "type":"boolean"},
		        {"name":"is_author_known", "type":"boolean"},
		        {"name":"comment_general", "type":"string"},
		        {"name":"entity", "type":"hidden", "defaultValue":"FAT"}
		    ],
		    
		    "rules":
            [
                {"exp":"is_author_known=true", "result":{"block":"bAuthor"}},
	            {"exp":"is_author_known=false", "result":{"block":"bOrphan"}},
                {"exp":"contains_people_brand_info=true", "result":{"block":"bContent"}},
                {"exp":"is_part_of_edited_work=true", "result":{"block":"bEditedWorkData"}}
	        ]
		},
		
		{
		    "description":"Content information",
		    "name":"bContent",
		    "data":
		    [
		        {"name":"has_identifiable_people", "type":"boolean"},
		        {"name":"has_personal_data", "type":"boolean"},
		        {"name":"has_brands", "type":"boolean"},
		        {"name":"has_confidential_info", "type":"boolean"}
		    ],
		    
		    "rules":
		    [
		       	{"exp":"has_people=true", "result":{"block":"bPeople"}},
		       	{"exp":"has_personal_data=true", "result":{"block":"bPersonal"}},
		       	{"exp":"has_brands=true", "result":{"block":"bBrands"}},
		       	{"exp":"has_confidential_info=true", "result":{"block":"bConfidential"}},
		    ]
		},
		
		{
		    "description":"People",
		    "name":"bPeople",
		    "autodata":{"key":"person_name", "type":"autodata_table"},
		    "data":
		    [
				{"name":"person_name", "type":"string"},
				{"name":"is_person_event_place_public", "type":"boolean"},
				{"name":"is_private_in_public_place", "type":"boolean"},
				{"name":"is_person_awared", "type":"string", "values":["yes", "no", "unknown"]},
				{"name":"impacts_honor_intimacy", "type":"string", "values":["yes", "no", "unknown"]},
				{"name":"people_constentment", "type":"string", "values":["yes", "no", "unknown"]},
				{"name":"people_constentment_reference", "type":"string"},
				{"name":"geographic_scope", "type":"string"},
				{"name":"use_scope", "type":"string"},
				{"name":"people_comments", "type":"string"}
		    ],
		    
		    "rules":
		    [
		    	{"exp":"has_personal_data=true", "result":{"block":"bPersonal"}},
		       	{"exp":"has_brands=true", "result":{"block":"bBrands"}},
		       	{"exp":"has_confidential_info=true", "result":{"block":"bConfidential"}},
		       	{"exp":"is_person_event_place_public=true", "result":{"color":"green"}},
		       	{"exp":"is_private_in_public_place=true", "result":{"color":"green"}},
		       	{"exp":"is_person_awared='yes' && people_constentment='yes'", "result":{"color":"green"}},
		       	{"exp":"is_person_awared='unknown'", "result":{"color":"orange"}},
		       	{"exp":"is_person_awared='yes' && impacts_honor_intimacy='no'", "result":{"color":"green"}},
		       	{"exp":"impacts_honor_intimacy='unknown'", "result":{"color":"orange"}},
		       	{"exp":"true", "result":{"color":"red"}}
		    ]
		},
		
		{
		    "description":"Personal",
		    "name":"bPersonal",
		    "data":
		    [
		       	{"name":"personal_data_types", "type":"string"},
		       	{"name":"personal_consentment", "type":"string", "values":["yes", "no", "unknown"]},
		       	{"name":"personal_consentment_reference", "type":"string"},
		       	{"name":"personal_data_aim", "type":"string", "values":["internal_use", "publication", "third_party", "other"]},
		       	{"name":"geographic_scope", "type":"string"},
		       	{"name":"personal_data_risk", "type":"string", "values":["high","medium","low","unexisting"]},
		       	{"name":"personal_data_comment", "type":"string"}
		    ],
		    
		    "rules":
		    [
		    	{"exp":"has_brands=true", "result":{"block":"bBrands"}},
		       	{"exp":"has_confidential_info=true", "result":{"block":"bConfidential"}},
		       	{"exp":"personal_consentment='no' && personal_data_risk!='unexisting'", "result":{"color":"red"}},
		       	{"exp":"personal_consentment='unknown' && personal_data_risk!='unexisting'", "result":{"color":"red"}},
		       	{"exp":"personal_data_aim='publication' && geographic_scope!=''", "result":{"color":"yellow"}},
		       	{"exp":"personal_data_aim='publication'", "result":{"color":"green"}},
		       	{"exp":"personal_data_aim='internal_use'", "result":{"color":"red"}},
		       	{"exp":"personal_data_aim='third_party'", "result":{"color":"yellow"}},
		       	{"exp":"true", "result":{"color":"red"}},
		    ]
		},
		
		{
			"description":"Requests author specific data",
			"name":"bAuthor",
			"data":
			[
			    {"name":"author_name", "type":"string"},
			    {"name":"work_creation_date", "type":"date"},
			    {"name":"work_spread_date", "type":"date"},
			    {"name":"author_role", "type":"string", "values":["employed", "contract", "independent", "curator", "other"]},
			    {"name":"comment_author", "type":"string"}
			],
			
			"rules":
			[
				{"exp":"author_role='employed' && contains_people_brand_info=false", "result":{"color":"green"}},
				{"exp":"author_role='employed' && contains_people_brand_info=true", "result":{"block":"bContent"}},
				{"exp":"author_role='contract' || author_role='independent'", "result":{"block":"bContract"}},
				{"exp":"author_role='curator'", "result":{"block":"bCession"}}
			]
		},
		
		{
			"description":"Contract information",
			"name":"bContract",
			"data":
			[
			    {"name":"contractor_name", "type":"string"},
			    {"name":"contract_comment", "type":"string"}
			],
			
			"rules":
			[
				{"exp":"true", "result":{"block":"bCession"}}
			]
		},
		
		{
			"description":"Queries whether cession contract exists or not",
			"name":"bCession",
			"data":
			[
			    {"name":"contract_exists", "type":"string", "values":["yes", "no", "unknown"]},
			    {"name":"cession_comment", "type":"string"}
			],
			
			"rules":
			[
				{"exp":"contract_exists='yes'", "result":{"block":"bCessionContract"}},
				{"exp":"true", "result":{"color":"red"}}
			]
		},
		
		{
			"description":"Requests specific transferred rights",
			"name":"bCessionContract",
			"data":
			[
			    {"name":"contract_reference", "type":"string"},
			    {"name":"right_reproduction", "type":"boolean"},
			    {"name":"right_transformation", "type":"boolean"},
			    {"name":"right_publication", "type":"boolean"},
			    {"name":"right_distribution", "type":"boolean"},
			    {"name":"time_limit", "type":"integer"},
			    {"name":"creative_commons", "type":"string", "values":["no_cc", "by", "by_nc", "by_sa", "by_nc_sa", "by_nd", "by_nd_nc"]},
			    {"name":"payment_required", "type":"boolean"}
			],
			
			"rules":
			[
				{"exp":"creative_commons!='no_cc' || right_publication=true", "result":{"color":"green"}},
				{"exp":"right_reproduction=true || right_transformation=true || right_distribution=true", "result":{"color":"yellow"}},
				{"exp":"true", "result":{"color":"red"}}
			]
		},

		{
			"description":"Requests data for orphan works",
			"name":"bOrphan",
			"data":
			[
			    {"name":"known_origin", "type":"string"},
			    {"name":"has_rights_protection", "type":"string", "values":["yes","no","unknown"]},
			    {"name":"owner_research", "type":"string", "values":["yes","no","unknown"]},
			    {"name":"owner_research_comment", "type":"string"},
			    {"name":"risk", "type":"string", "values":["high","low","unexisting"]},
			    {"name":"orphan_work_comment", "type":"string"}
			],
			
			"rules":
			[
				{"exp":"has_rights_protection='unknown' || owner_research='unkown' || owner_research='no' ", "result":{"color":"red"}},
				{"exp":"has_rights_protection='yes'", "result":{"color":"red"}},
				{"exp":"risk='high'", "result":{"color":"red"}},
				{"exp":"risk='low'", "result":{"color":"yellow"}},
				{"exp":"risk='unexisting'", "result":{"color":"green"}}
			]
		}
	]
}