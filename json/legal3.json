/* 

Basic expressions information:
	Operators "=", ">", "<", "!=", "&&", "||"
	Values must be either constant values (string, integer, boolean) or any data-name already introduced in the process.
	An expression will always evaluate to boolean (true/false).
	While process is running: when a block is filled up, the rules are used to know which block to continue to.

*/

{
	"startBlock":"bGeneral",
	
	"blocks":
	[
		{
		    "description":"Requests general data which is required for any work or document",
		    "name":"bGeneral",
		    "data":
		    [
		        {"name":"work_family", "type":"string"},
		        {"name":"work_reference", "type":"string"},
		        {"name":"work_type", "type":"string", "values":["digital_reproduction", "event_person_expo_photo", "audio", "video", "original_text", "plastic_work", "photo_work", "building", "expo_installation", "edited_book"]},
		        {"name":"is_part_of_edited_work", "type":"boolean"},
		        {"name":"edited_work_reference", "type":"string"},
		        {"name":"contains_other_works", "type":"boolean"},
		        {"name":"contains_people_brand_info", "type":"boolean"},
		        {"name":"is_author_known", "type":"boolean"},
		        {"name":"comment_general", "type":"string"},
		        {"name":"entity", "type":"hidden", "value":"FAT"}
		    ],
		    
		    "rules":
            [
                {"exp":"contains_people_brand_info=true", "result":{"block":"bContent"}},
	            {"exp":"is_part_of_edited_work=true", "result":{"block":"bEditedWorkData"}},
	            {"exp":"is_author_known=true", "result":{"block":"bAuthor"}},
	            {"exp":"is_author_known=false", "result":{"block":"bOrphan"}},
	        ]
		},
		
		{
			"description":"Requests author specific data",
			"name":"bAuthor",
			"data":
			[
			    {"name":"author_name", "type":"string"},
			    {"name":"work_creation_date", "type":"date"},
			    {"name":"work_spread_date", "type":"date"},
			    {"name":"author_role", "type":"string", "values":["employed", "contract", "independent", "curator", "other"]},
			    {"name":"comment_author", "type":"string"},
			],
			
			"rules":
			[
				{"exp":"author_role='employed'", "result":{"color":"green"}},
				{"exp":"author_role='contract' || author_role='independent'", "result":{"block":"bContract"}},
				{"exp":"author_role='curator'", "result":{"block":"bCession"}},
			]
		},
		
		{
			"description":"Contract information",
			"name":"bContract",
			"data":
			[
			    {"name":"contractor_name", "type":"string"},
			    {"name":"contract_comment", "type":"string"}
			],
			
			"rules":
			[
				{"exp":"true", "result":{"block":"bCession"}},
			]
		},
		
		{
			"description":"Queries whether cession contract exists or not",
			"name":"bCession",
			"data":
			[
			    {"name":"contract_exists", "type":"string", "values":["yes", "no", "unknown"]},
			    {"name":"cession_comment", "type":"string"}
			],
			
			"rules":
			[
				{"exp":"contract_exists='yes'", "result":{"block":"bCessionContract"}},
				{"exp":"true", "result":{"color":"red"}}
			]
		},
		
		{
			"description":"Requests specific transferred rights",
			"name":"bCessionContract",
			"data":
			[
			    {"name":"contract_reference", "type":"boolean"},
			    {"name":"right_reproduction", "type":"boolean"},
			    {"name":"right_transformation", "type":"boolean"},
			    {"name":"right_publication", "type":"boolean"},
			    {"name":"right_distribution", "type":"boolean"},
			    {"name":"time_limit", "type":"integer"},
			    {"name":"creative_commons", "type":"string", "values":["no_cc", "by", "by_nc", "by_sa", "by_nc_sa", "by_nd", "by_nd_nc"]},
			    {"name":"payment_required", "type":"boolean"}
			],
			
			"rules":
			[
				{"exp":"creative_commons!='no_cc' || right_publication=true", "result":{"color":"green"}},
				{"exp":"right_reproduction=true || right_transformation=true || right_distribution=true", "result":{"color":"yellow"}},
				{"exp":"true", "result":{"color":"red"}}
			]
		},

		{
			"description":"Requests data for orphan works",
			"name":"bOrphan",
			"data":
			[
			    {"name":"known_origin", "type":"string"},
			    {"name":"has_rights_protection", "type":"string", "values":["yes","no","unknown"]},
			    {"name":"owner_research", "type":"string", "values":["yes","no","unknown"]},
			    {"name":"owner_research_comment", "type":"string"},
			    {"name":"risk", "type":"string", "values":["high","low","unexisting"]},
			    {"name":"orphan_work_comment", "type":"string"}
			],
			
			"rules":
			[
				{"exp":"has_rights_protection='unknown' || owner_research='unkown' || owner_research='no' ", "result":{"color":"red"}},
				{"exp":"has_rights_protection='yes'", "result":{"color":"red"}},
				{"exp":"risk='high'", "result":{"color":"red"}},
				{"exp":"risk='low'", "result":{"color":"yellow"}},
				{"exp":"risk='unexisting'", "result":{"color":"green"}}
			]
		}	
	]
}


